### 핵심 개념 정리

- 저장 단위: **클립(Clip)** = 이미지 0~N + 텍스트 0~1 + 출처 URL/도메인 + 메모 + 태그/폴더
- 폴더(=보드/컬렉션): Pinterest의 “보드” 느낌으로 **이미지 중심 묶음**
- 태그: 빠른 분류/검색용, 폴더와 독립

---

### Must 기능

### F1. 클라우드 지원(계정 + 동기화)

- 설명: 여러 기기에서 같은 아카이브를 보고/추가 가능
- 포함:
    - 로그인(최소): Apple/Google 또는 이메일 매직링크
    - 클라우드 저장(메타데이터 + 이미지 저장소)
    - 기본 동기화: 앱 실행 시/백그라운드 복귀 시 pull
- 완료 조건(DoD):
    - 다른 기기에서 로그인하면 **클립 리스트가 동일하게 보임**
    - 오프라인에서 만든 클립은 **온라인 시 자동 업로드/동기화**

### F2. “공유”로 데이터 업로드(이미지/짧은 텍스트)

- 설명: 웹페이지에서 **이미지/선택 텍스트**를 공유 → 앱에 “클립” 생성
- 포함(현실적인 MVP 버전):
    - iOS/Android: 시스템 Share Sheet에서 앱 선택 → “저장 화면”으로 진입
    - 입력 데이터(가능한 범위):
        - URL(가능하면)
        - 공유된 텍스트(선택 텍스트/페이지 제목 등)
        - 공유된 이미지(있는 경우)
    - 업로드 파이프라인
        - **저장 대상:** 원본이 아니라 **썸네일 1장만** (긴 변 1280px, 비율 유지, crop 없음)
        - **썸네일 포맷:** 기본 JPEG(q≈80), (옵션) WebP(q≈75~82)
        - **추가 메타:** `thumb_width`, `thumb_height` 저장(가변비율 그리드 계산용)
        - **선택 기능:** `blurhash` 또는 tiny placeholder 저장(피드 로딩 UX 개선)
- 완료 조건(DoD):
    - 공유로 이미지/텍스트/URL이 들어오면 저장 화면(S2)에 프리뷰가 표시됨
    - 저장 누르면 홈 피드에 **즉시 카드로 생성**
    - 저장 버튼 누르면 **클립 레코드가 먼저 생성(pending)** 되고, 썸네일 업로드 성공 시 **ready**가 됨
    - 업로드 실패 시에도 **로컬 큐에 남아 재시도**됨(오프라인에서도 “저장됨” 경험 유지)

### F3. 업로드와 동시에 폴더/태그 선택

- 설명: 저장 흐름에서 “분류”까지 끝내는 게 핵심 가치
- 포함:
    - 저장 화면에서 폴더 1개(또는 다중 선택은 Later) 선택
    - 태그 빠른 추가(최근 태그 추천 + 직접 입력)
    - “마지막 사용 폴더/태그” 기억(다음 저장 시 기본값)
- 완료 조건(DoD):
    - 저장 화면에서 폴더/태그 선택을 마치고 저장하면
        - DB에 `folder_id`, 태그 연결이 반영되고
        - 홈 그리드에서 즉시 필터링이 동작함

### F4. 이미지 중심 홈 피드(핀터레스트 스타일)

- Masonry/그리드로 카드 표시 (대표 이미지 + 짧은 텍스트 한 줄)
- 필터: 폴더/태그별 보기

### F5. 클립 상세(출처/텍스트/이미지/태그 편집)

- 상세에서: 출처 링크 열기, 텍스트 전체 보기, 태그 수정, 폴더 이동, 삭제

### F6. 검색/필터(최소 기능)

- 검색: 텍스트/도메인/태그 기반
- 필터: 폴더 선택 + 태그 chips

---

### Backlog(Later)

- L1. 도메인(웹사이트)별 묶어보기 (자동 그룹/탭 제공)
- L2. 자동 메타데이터 추출(페이지 제목/OG 이미지/요약)
- L3. 다중 폴더 저장, 스마트 폴더(조건 기반)
- L4. 브라우저 확장(PC에서 “선택 영역 저장”)
- L5. 비용 최소화 스토리지 분리 (Supabase + Cloudflare R2 + Workers)
    - 목적: 썸네일 트래픽/스토리지 비용을 0원에 가깝게 유지
    - 구성:
        - Supabase: Auth + Postgres(메타데이터)
        - Cloudflare R2: 썸네일 파일 저장(Private)
        - Cloudflare Workers: 인증 검증 + signed URL 발급/프록시
    - 적용 시점:
        - Supabase Storage 무료 1GB를 넘어 유료 플랜이 부담될 때
        - 또는 복기/스크롤이 늘어 이미지 egress 비용이 의미 있게 커질 때